<mat-card class="new-project">
    <mat-progress-bar mode="indeterminate"  *ngIf="addPending"></mat-progress-bar>
  <mat-card-header>
    <mat-card-title>添加新项目</mat-card-title>

  </mat-card-header>
  <mat-card-content>
    <mat-form-field>
      <input matInput placeholder="项目名称"
      required type="text"

      maxlength="30"
      [(ngModel)]="projectInfo.title"
      #title="ngModel"
      >
      <mat-error *ngIf="title.errors?.required">标题不能为空</mat-error>
      <mat-error *ngIf="title.errors?.maxlength">标题不能多于30位字符</mat-error>
    </mat-form-field>
    <mat-form-field>
      <input matInput placeholder="外派公司"
      required type="text"
      maxlength="30"
      [(ngModel)]="projectInfo.company"
      #company="ngModel"
      >
      <mat-error *ngIf="company.errors?.required">公司名称不能为空</mat-error>
      <mat-error *ngIf="company.errors?.maxlength">公司名称不能多于30位字符</mat-error>
    </mat-form-field>

      <mat-form-field>
          <input matInput placeholder="外派地址"
          required type="text"
          maxlength="30"
          [(ngModel)]="projectInfo.addr"
          #addr="ngModel"
          >
          <mat-error *ngIf="addr.errors?.required">公司地址不能为空</mat-error>
          <mat-error *ngIf="addr.errors?.maxlength">公司地址不能多于30位字符</mat-error>
        </mat-form-field>
        <div>
                <app-auto-complate (selectedStaff)="newSelect($event)"></app-auto-complate>
                <mat-list>
                  <mat-list-item color="accent" *ngFor="let item of projectInfo.staffGroup">
                    {{item.staffName}} 工号:{{item.staffId}}
                    <button (click)="deleteStaff(item)" mat-icon-button><mat-icon>delete</mat-icon></button>
                  </mat-list-item>

                </mat-list>
        </div>

        <mat-form-field>
            <textarea matInput placeholder="请概括填写项目内容"
            required type="text"
            maxlength="100"
            [(ngModel)]="projectInfo.content"
            #content="ngModel">
          </textarea>
            <mat-error *ngIf="addr.errors?.required">内容不能为空</mat-error>
            <mat-error *ngIf="addr.errors?.maxlength">内容不能多于30位字符</mat-error>
          </mat-form-field>

  </mat-card-content>
  <mat-card-actions>
    <button mat-button
    [disabled]="projectInfo.staffGroup.length===0 || addPending || title.invalid || company.invalid || addr.invalid || content.invalid " (click)="addNew()">确定
  </button>
  </mat-card-actions>
</mat-card>
